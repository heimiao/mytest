!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=147)}({10:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=document,i=function(){function e(){o(this,e)}return a(e,[{key:"createElement",value:function(){var e="udesk-callcenter-component-alert",t=this.element=r.getElementById(e),n=r.body;t||(t=this.element=r.createElement("div"),t.id=e,n.appendChild(t))}},{key:"success",value:function(e){this.createElement(),this.element.innerText=e,this.element.style.backgroundColor="green",this.show()}},{key:"error",value:function(e){this.createElement(),this.element.innerText=e,this.element.style.backgroundColor="red",this.show()}},{key:"destroy",value:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}},{key:"show",value:function(){var e=this;this.element.style.display="block",clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){e.element&&(e.element.style.display="none")},5e3)}}]),e}();t.default=new i},147:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(25),s=o(i),c=n(10),l=(o(c),function(){}),u=function(){function e(){a(this,e)}return r(e,[{key:"tokenInit",value:function(e,t,n){s.default.token=e,s.default.host="https://"+t+".udesk.cn",s.default.refreshToken=n}},{key:"_updateAgentWorkState",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l,r={};void 0!==n&&(r.cc_custom_state_id=n),r.agent_work_state=t,r.agent_no=e,s.default.post("/agent_api/v1/callcenter/agents/update_agent_work_state",r,function(e){switch(e.code){case 1e3:o(e);break;default:a(e)}},function(e){a(e)})}},{key:"setMonitorWorkStatus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;this._updateAgentWorkState(e,t,void 0,n,o)}},{key:"setMonitorWorkRestingStatus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;this._updateAgentWorkState(e,"resting",t,n,o)}},{key:"setMonitorAgentWorkWay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l;s.default.post("/agent_api/v1/callcenter/agents/update_agent_work_way",{agent_no:e,agent_work_way:t},function(e){switch(e.code){case 1e3:n(e);break;default:o(e)}},function(e){o(e)})}},{key:"monitorAgentListeing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;s.default.post("/agent_api/v1/callcenter/desktop/listeing",{agent_no:e},function(e){switch(e.code){case 1001:t(e);break;default:n(e)}},function(e){n(e)})}},{key:"monitorAgentInterpose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;s.default.post("/agent_api/v1/callcenter/desktop/interpose",{agent_no:e},function(e){switch(e.code){case 1001:t(e);break;default:n(e)}},function(e){n(e)})}},{key:"monitorAgentSubstitute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;s.default.post("/agent_api/v1/callcenter/desktop/substitute",{agent_no:e},function(e){switch(e.code){case 1001:t(e);break;default:n(e)}},function(e){n(e)})}}]),e}();window.callAPI=new u},25:function(module,exports,__webpack_require__){"use strict";function getXMLHttpRequest(){var e;if("undefined"!=typeof XMLHttpRequest)e=new XMLHttpRequest;else for(var t=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],n=0,o=t.length;n<o;n++)try{e=new ActiveXObject(t[n]);break}catch(e){}return e}function load(options){function ensureReadiness(){if(!(xhr.readyState<4)){if(xhr.status<200||xhr.status>=300){if(400===xhr.status){var _content=xhr.response,_contentType=xhr.getResponseHeader("Content-Type");if(_contentType.indexOf("application/json")>-1&&(_content=JSON.parse(_content),("invalid_password"===_content.code||"token_expired"===_content.code)&&obj.refreshToken&&!options.retry))return void obj.refreshToken(function(e){options.retry=!0,obj.token=e,load(options)})}return void(failureCallback&&failureCallback(xhr))}if(4===xhr.readyState){var contentType=xhr.getResponseHeader("Content-Type");"application/javascript"===contentType?successCallback&&successCallback(eval(xhr.response),xhr):contentType.indexOf("application/json")>-1?successCallback&&successCallback(JSON.parse(xhr.response),xhr):successCallback&&successCallback(xhr.response,xhr)}}}var method=options.method,url=options.url,content=options.content,successCallback=options.successCallback,failureCallback=options.failureCallback,headers=options.headers,xhr=getXMLHttpRequest();if(xhr.onreadystatechange=ensureReadiness,xhr.open(method,obj.host+url,!0),headers)for(var i in headers)xhr.setRequestHeader(i,headers[i]);xhr.setRequestHeader("Authorization","Basic "+btoa("agent:"+obj.token)),xhr.send(content)}function get(e,t,n,o){var a=serializeParams(t);a&&(-1===e.indexOf("?")?e+="?"+a:e+="&"+a),load({method:"GET",url:e,successCallback:function(e,t){"string"==typeof e?n&&n(JSON.parse(e),t):n&&n(e,t)},failureCallback:o})}function post(e,t,n,o){load({method:"POST",url:e,headers:{"Content-type":"application/x-www-form-urlencoded"},content:serializeParams(t),successCallback:n,failureCallback:o})}function postJSON(e,t,n,o){load({method:"POST",url:e,content:JSON.stringify(t),successCallback:function(e,t){"string"==typeof e?n&&n(JSON.parse(e),t):n&&n(e,t)},headers:{"content-type":"application/json"},failureCallback:o})}function put(e,t,n,o){load({method:"PUT",url:e,content:JSON.stringify(t),successCallback:function(e,t){"string"==typeof e?n&&n(JSON.parse(e),t):n&&n(e,t)},headers:{"content-type":"application/json"},failureCallback:o})}function del(e,t,n,o){load({method:"DELETE",url:e,content:JSON.stringify(t),successCallback:function(e,t){"string"==typeof e?n&&n(JSON.parse(e),t):n&&n(e,t)},headers:{"content-type":"application/json"},failureCallback:o})}function serializeParams(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t=t.join("&")}var obj={get:get,post:post,postJSON:postJSON,put:put,delete:del,token:"",host:"",refreshToken:null};module.exports=obj}});